<!DOCTYPE html>
<html>
<head>
	<title>Trapstore-API</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

	<meta lang="es">
	<meta name="Description" content="Practicando con javascript">
	<meta charset="utf-8">


</head>
<body>

	<header class="container bg-secondary py-5">
		<h1 class="display-1 text-info text-center">TrapStore</h1>
		<p class="lead text-info text-center">Bienvenido a la pagina web más actualizada sobre el mundo del trap</p>
	</header>

	<nav class="container py-5">

		<ul class="nav justify-content-center bg-secondary m-1">
			<li class= "nav-item ">
				<a class="nav-link text-info" href="index.html">Principal</a>
			</li>
			<li class= "nav-item">
				<a class="nav-link text-info" href="formulario.html">Formulario</a>
			</li class= "nav-item">
			<li class= "nav-item">
				<a class="nav-link text-info" href="APIWindow.html">Info de API rest</a>
			</li>
		</ul>
	</nav>

	<div class="container">

		<div class="row py-1">
			<h1 class="display-4 text-info text-center">Otros Usuarios </h1>
		</div>		
		<div class="row py-1">
			<p class="lead text-center"> Aqui puedes consultar informacion de algunos de nuestros usuarios</p>
		</div>	

		<div class="row py-1">
			<button type="button" class="btn btn-outline-info btn-lg btn-block" id="buttonFor1User">Muestrame 1 usuario</button>
		</div>
		
		<div class="row py-1">
			<button type="button" class="btn btn-outline-info btn-lg btn-block" id="buttonFor5Users">Muestrame 5 usuarios</button>
		</div>

		<div class="row py-1">
			<button type="button" class="btn btn-outline-info btn-lg btn-block" id="buttonFor10Users">Muestrame 10 usuarios</button>
		</div>

	</div>

	<div class="container py-5">
		
		<table class="table">
			
			<thead class="thead-dark">

				<tr>
					<th scope="col">#</th>
					<th scope="col">ID</th>
					<th scope="col">NAME</th>
					<th scope="col">USERNAME</th>
					<th scope="col">EMAIL</th>
				</tr>
				
			</thead>

			<tbody id="bodyOfTable">
				
				<!--A rellenar con JS-->

			</tbody>

		</table>

	</div>


	<footer class="container bg-secondary py-5">

		<div class="container rounded border border-3 border-info col-6 d-flex justify-content-center">
			<p class="lead text-info">Pagina creada por Álvaro Prado Moreno</p>
		</div>

	</footer>


</body>

<script type="text/javascript">

//utilizo la API rest fake de jsonplaceholder.typicode.com

//si no se especifica el cuerpo del fetch, el verbo es GET

var vectorRespuesta=[]; //aqui guardo toda la info

fetch("https://jsonplaceholder.typicode.com/users")

//me suscribo a la promise response
.then(function(response){

	if(response.ok){
		//Si la respuesta es buena te la pasa a formato JSON
		return response.json();
	}else{
		throw response;
	}
})

//me vuelvo a suscribir a otra promesa, en este caso el body de la peticion

.then(function(responseBody){

	//console.log(responseBody);  para comprobar que todo va bien

	vectorRespuesta=responseBody
	console.log(responseBody[0]);
})

//En este punto capturo cualquier erro de ambas promises solo con un catch

.catch(function(error){
	console.err(error);
})

var buttonFor1User= document.getElementById("buttonFor1User");
var buttonFor5Users= document.getElementById("buttonFor5Users");
var buttonFor10Users= document.getElementById("buttonFor10Users");


function creadorContenido(numUsuariosAMostrar){
	//Me creo un String con todo lo que voy a ir poniendo

	let contenidoHtml="";

	for(var i=0; i<numUsuariosAMostrar; i++){

		//si quiero meter una variable en una string tiene que ir con ``

		contenidoHtml+="<tr>"+
						`<th scope="row"> Usuario ${i}</th>`+
						`<td>${vectorRespuesta[i].id}</td>`+
						`<td>${vectorRespuesta[i].name}</td>`+
						`<td>${vectorRespuesta[i].username}</td>`+
						`<td>${vectorRespuesta[i].email}</td>`+
						"</tr>";
	}

	//cuando ya tengo mi String lo meto en mi tabla

	document.getElementById("bodyOfTable").innerHTML="";
	document.getElementById("bodyOfTable").innerHTML=contenidoHtml;
}


buttonFor1User.addEventListener("click", function(event){

	creadorContenido(1);
});

buttonFor5Users.addEventListener("click", function(event){

	creadorContenido(5);
});

buttonFor10Users.addEventListener("click", function(event){

	creadorContenido(10);
});

</script>



</html>